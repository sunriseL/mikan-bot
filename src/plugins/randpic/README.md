# 随机图片插件

这是一个基于 NoneBot2 的随机图片发送插件，支持自定义词条和别名功能。

## 功能特性

- 支持自定义词条触发随机图片
- 支持别名功能，可以为词条设置别名
- 支持用户使用次数限制
- 支持图片去重（基于MD5）
- 支持统计功能
- 支持管理员权限控制

## 主要命令

### 基础功能
- `[词条名]` - 发送对应词条的随机图片
- `/添加 [词条名]` - 向指定词条添加图片

### 管理功能
- `/添加词条 [词条名]` - 创建新词条（需要管理员权限）
- `/添加alias [词条名] [别名]` - 为词条添加别名
- `/删除alias [别名]` - 删除别名（需要管理员权限）

### 查询功能
- `/checknsy` - 查看各词条的图片数量
- `/check_count [参数]` - 查看使用统计

## 配置说明

在 `.env` 文件中配置以下参数：

```env
# 随机图片插件配置
RANDPIC_COMMAND_LIST=["capoo"]  # 默认词条列表
RANDPIC_STORE_DIR_PATH="data/randpic"  # 图片存储路径
RANDPIC_BANNER_GROUP=[]  # 禁用群组列表
RANDPIC_LIMIT_VALUE=0  # 用户限制次数（0为无限制）
RANDPIC_LIMIT_INTERVAL_SECONDS=0  # 限制刷新间隔（秒）
```

## 文件结构

```
src/plugin/
├── __init__.py      # 插件初始化文件
├── config.py        # 配置文件
├── randpic.py       # 主要功能实现
└── README.md        # 说明文档
```

## 数据库结构

插件使用 SQLite 数据库存储以下信息：

- `Pic_of_[词条名]` - 存储每个词条的图片信息
- `Alias` - 存储别名映射关系
- `randpic_log` - 存储使用日志

## 注意事项

1. 管理员权限用户ID为 540729251，可在代码中修改
2. 图片文件会自动重命名并去重
3. 支持 base64 编码的图片发送
4. 插件会自动创建必要的文件夹和数据库表 